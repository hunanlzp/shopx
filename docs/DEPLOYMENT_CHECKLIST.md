# ShopX 部署检查清单

本文档提供了部署前的完整检查清单，确保所有功能正常运行。

## 数据库检查

### ✅ 数据库表结构

- [ ] 执行 `src/main/resources/db/schema.sql` 创建所有表
- [ ] 验证所有25个新表已创建：
  - [ ] t_search_history
  - [ ] t_saved_filter
  - [ ] t_product_image
  - [ ] t_product_review
  - [ ] t_product_audit
  - [ ] t_product_history
  - [ ] t_price_history
  - [ ] t_price_protection
  - [ ] t_guest_session
  - [ ] t_payment_method
  - [ ] t_logistics_tracking
  - [ ] t_shipping_address
  - [ ] t_return_order
  - [ ] t_recommendation_feedback
  - [ ] t_user_recommendation_preference
  - [ ] t_stock_notification
  - [ ] t_product_reservation
  - [ ] t_wishlist
  - [ ] t_product_comparison
  - [ ] t_customer_service_ticket
  - [ ] t_faq
  - [ ] t_review_vote
  - [ ] t_login_history
  - [ ] t_two_factor_auth
  - [ ] t_account_security

### ✅ 数据库索引

- [ ] 验证所有索引已创建
- [ ] 检查索引性能（使用EXPLAIN）

### ✅ 数据库连接

- [ ] 配置数据库连接池
- [ ] 测试数据库连接
- [ ] 配置读写分离（如需要）

---

## 后端配置检查

### ✅ 应用配置

- [ ] 检查 `application.yml` 或 `application.properties`
- [ ] 配置数据库连接
- [ ] 配置Redis连接
- [ ] 配置Sa-Token
- [ ] 配置Swagger文档路径

### ✅ 依赖检查

- [ ] Spring Boot 3.2.0
- [ ] MyBatis-Plus
- [ ] Redis + Redisson
- [ ] Sa-Token
- [ ] Swagger/OpenAPI
- [ ] 其他依赖已正确配置

### ✅ 服务检查

- [ ] 所有Service实现类已创建
- [ ] 所有Mapper接口已扫描
- [ ] 事务配置正确
- [ ] 异常处理配置

### ✅ Controller检查

- [ ] 所有Controller已创建
- [ ] API版本注解正确
- [ ] 权限注解正确
- [ ] Swagger文档注解完整

---

## 功能测试检查

### ✅ REQ-001: 智能搜索和筛选

- [ ] 高级搜索API测试
- [ ] 搜索历史记录功能
- [ ] 保存筛选条件功能

### ✅ REQ-002: 商品信息完整性

- [ ] 商品图片上传
- [ ] 商品评价创建
- [ ] 商品审核流程
- [ ] 商品修改历史

### ✅ REQ-003: 价格透明化

- [ ] 价格历史记录
- [ ] 价格保护功能
- [ ] 总价计算（含运费税费）

### ✅ REQ-004: 购物车和结算

- [ ] 购物车状态检查
- [ ] 游客购物车
- [ ] 结算流程
- [ ] 支付方式管理

### ✅ REQ-005: 物流追踪

- [ ] 物流信息查询
- [ ] 物流状态更新
- [ ] 配送选项

### ✅ REQ-006: 退货退款

- [ ] 退货申请创建
- [ ] 退货进度追踪
- [ ] 退款处理

### ✅ REQ-007: 推荐系统

- [ ] 过滤已购买商品
- [ ] 推荐反馈
- [ ] 推荐偏好设置

### ✅ REQ-008: 移动端支持

- [ ] 设备检测API
- [ ] 移动端配置API
- [ ] PWA更新检查

### ✅ REQ-009: 账户安全

- [ ] 登录历史记录
- [ ] 双因素认证
- [ ] 异常登录检测
- [ ] 安全设置

### ✅ REQ-010: 库存管理

- [ ] 库存提醒
- [ ] 商品预订
- [ ] 替代商品推荐

### ✅ REQ-011: 商品对比

- [ ] 创建对比列表
- [ ] 对比表格生成
- [ ] 分享功能

### ✅ REQ-012: 愿望清单

- [ ] 愿望清单管理
- [ ] 价格提醒
- [ ] 分享功能

### ✅ REQ-013: 客服系统

- [ ] 工单创建
- [ ] FAQ搜索
- [ ] 响应时间统计

### ✅ REQ-014: 评价系统

- [ ] 评价创建（购买验证）
- [ ] 评价筛选排序
- [ ] 评价投票
- [ ] 商家回复

---

## 安全检查

### ✅ 认证和授权

- [ ] Sa-Token配置正确
- [ ] 登录接口正常
- [ ] 权限验证正常
- [ ] Token刷新机制

### ✅ 数据安全

- [ ] 密码加密存储
- [ ] 敏感数据加密
- [ ] SQL注入防护
- [ ] XSS防护
- [ ] CSRF防护

### ✅ API安全

- [ ] 请求限流配置
- [ ] 异常登录检测
- [ ] 双因素认证可用

---

## 性能检查

### ✅ 缓存配置

- [ ] Redis连接正常
- [ ] 缓存策略配置
- [ ] 缓存失效策略

### ✅ 数据库优化

- [ ] 慢查询日志检查
- [ ] 索引优化
- [ ] 连接池配置

### ✅ 接口性能

- [ ] 响应时间测试
- [ ] 并发测试
- [ ] 压力测试

---

## 日志和监控

### ✅ 日志配置

- [ ] 日志级别配置
- [ ] 日志文件路径
- [ ] 日志轮转配置

### ✅ 监控配置

- [ ] 应用监控
- [ ] 数据库监控
- [ ] 缓存监控
- [ ] 错误告警

---

## 文档检查

### ✅ API文档

- [ ] Swagger文档可访问
- [ ] 所有API都有文档
- [ ] 请求示例完整
- [ ] 响应示例完整

### ✅ 开发文档

- [ ] 开发指南更新
- [ ] API使用指南完整
- [ ] 部署文档完整

---

## 集成检查

### ✅ 第三方服务

- [ ] 物流API集成（如需要）
- [ ] 支付API集成（如需要）
- [ ] 短信服务集成（如需要）
- [ ] 邮件服务集成（如需要）

### ✅ 文件存储

- [ ] 图片上传功能
- [ ] 文件存储配置
- [ ] CDN配置（如需要）

---

## 部署前最终检查

### ✅ 代码质量

- [ ] 代码审查完成
- [ ] 单元测试通过
- [ ] 集成测试通过
- [ ] 代码规范检查

### ✅ 环境准备

- [ ] 开发环境测试通过
- [ ] 测试环境部署成功
- [ ] 生产环境配置准备
- [ ] 数据库备份策略

### ✅ 回滚计划

- [ ] 回滚脚本准备
- [ ] 数据迁移脚本
- [ ] 回滚测试

---

## 部署后检查

### ✅ 功能验证

- [ ] 所有API可访问
- [ ] 核心功能正常
- [ ] 数据正确性验证

### ✅ 性能验证

- [ ] 响应时间正常
- [ ] 并发处理正常
- [ ] 资源使用正常

### ✅ 监控验证

- [ ] 日志正常输出
- [ ] 监控数据正常
- [ ] 告警机制正常

---

## 注意事项

1. **数据库迁移**: 在生产环境执行SQL前，务必先备份数据库
2. **配置检查**: 确保所有敏感配置（密码、密钥）使用环境变量或配置中心
3. **依赖版本**: 确保所有依赖版本兼容
4. **性能测试**: 在生产环境部署前进行充分的性能测试
5. **安全审计**: 进行安全审计，确保没有安全漏洞

---

## 紧急联系

如遇到问题，请参考：
- 开发文档：`docs/DEVELOPMENT_GUIDE.md`
- API文档：`docs/API_DOCUMENTATION.md`
- 实施总结：`docs/IMPLEMENTATION_SUMMARY.md`
- API使用指南：`docs/API_USAGE_GUIDE.md`

---

**最后更新**: 2024年

